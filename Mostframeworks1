import React, { useState, useEffect, useRef } from 'react';

/**
 * MIRO BRAND TOKENS (Ref: 2025 Miro Brand Guidelines)
 */
const BRAND = {
  yellow: '#ffdd33',
  black: '#1c1c1e',
  gray: '#B3B3B3',
  canvas: '#FFFFFF',
  grid: '#EAEAEA',
  cyan: '#47D1C4',
  purple: '#867AFF',
  pink: '#FF8CDE',
  blue: '#2AC7FF'
};

const Icons = {
  Technical: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
    </svg>
  ),
  Product: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>
    </svg>
  ),
  Strategy: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
    </svg>
  ),
  AI: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
    </svg>
  ),
  Migration: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <path d="M3 11a9 9 0 0 1 18 0" /><path d="M12 11V3" /><path d="M7 11V6" /><path d="M17 11V6" /><path d="M3 18h18" /><path d="M3 14h18" />
    </svg>
  ),
  Enterprise: () => (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
    </svg>
  )
};

const FRAMEWORKS_DATA = [
  {
    id: 1,
    title: "Technical Foundations",
    subtitle: "& Data Governance",
    color: BRAND.cyan,
    icon: "Technical",
    focus: "Reducing tool sprawl, bringing structure to collaboration, and improving governance across a complex Miro environment.",
    bestFor: "Information Technology, Security, and Operations leaders standardizing a new or growing deployment.",
    impactVision: "Establish a resilient, secure, and highly scalable collaborative infrastructure that reduces operational risk by up to 40%.",
    outcomes: [
      { name: "Single Organized Workspace", impact: "Eliminate shadow Information Technology and reduce administrative overhead with a unified environment." },
      { name: "Sustainable Data Governance", impact: "Establish clear rules, automated processes, and compliance standards that protect organizational data." },
      { name: "Standardized Operations", impact: "Deploy reusable templates for core cross-functional workflows like hiring and onboarding." },
      { name: "Reduced Context Switching", impact: "Seamless integration with Confluence, Slack, and Google Drive keeps teams focused in a single flow." },
      { name: "Consistent User Adoption", impact: "Structured change management ensures 90%+ team adoption of new workspace standards." }
    ],
    workstreams: [
      { name: "Workspace Consolidation & Cleanup", hrs: 45 },
      { name: "Governance Framework + Standards", hrs: 30 },
      { name: "Custom Templates for Processes", hrs: 50 },
      { name: "Integrations with Confluence & Slack", hrs: 35 },
      { name: "Change Management & Rollout", hrs: 30 },
      { name: "Quarterly Usage & Governance Reviews", hrs: 50 }
    ]
  },
  {
    id: 2,
    title: "Product & Engineering",
    subtitle: "Optimization",
    color: BRAND.purple,
    icon: "Product",
    focus: "Improving engineering velocity, standardizing Agile ceremonies, and strengthening cross-team visibility.",
    bestFor: "Engineering and Product leaders looking to streamline Agile practices and increase development throughput.",
    impactVision: "Accelerate delivery cycles and improve feature velocity by automating manual ticket management and planning ceremonies.",
    outcomes: [
      { name: "Reliable Jira & Azure DevOps Sync", impact: "Achieve accurate synchronizations that eliminate manual updates and planning misalignment." },
      { name: "Unified Agile Ceremonies", impact: "Predictable retrospectives, planning, and review cycles using standardized, reusable boards." },
      { name: "Artificial Intelligence Insights", impact: "Automated extraction of blockers and risks speeds up reporting and reduces administrative note-taking." },
      { name: "Architecture Knowledge Management", impact: "Faster onboarding and audits through a centralized, living library of system diagrams." },
      { name: "Repeatable Program Increment Planning", impact: "Execute quarterly planning with absolute visibility into complex dependencies." }
    ],
    workstreams: [
      { name: "Jira + Azure DevOps Integration Cleanup", hrs: 35 },
      { name: "System Architecture Blueprint Library", hrs: 55 },
      { name: "Unified Agile Ceremony Framework", hrs: 40 },
      { name: "Change Management & Enablement Plan", hrs: 20 },
      { name: "Artificial Intelligence Sidekicks", hrs: 30 },
      { name: "Program Increment Planning Support", hrs: 60 }
    ]
  },
  {
    id: 3,
    title: "Project Management",
    subtitle: "& Strategy Excellence",
    color: BRAND.pink,
    icon: "Strategy",
    focus: "Strengthening prioritization, improving visibility across portfolios, and ensuring consistent execution of strategic initiatives.",
    bestFor: "Project Management Office and Strategy leaders needing a single source of truth for complex portfolios.",
    impactVision: "Connect high-level corporate strategy to day-to-day delivery with real-time visibility into every strategic initiative.",
    outcomes: [
      { name: "Single Source of Portfolio Truth", impact: "Track all initiatives, risks, and progress in one place, eliminating fragmented reporting." },
      { name: "Consistent Strategy Roadmapping", impact: "Standardize annual and quarterly planning across every department for total alignment." },
      { name: "Automated Status Reporting", impact: "Leverage Artificial Intelligence to generate summaries, saving hours of manual update work." },
      { name: "Real-Time Executive Visibility", impact: "Dashboards providing leadership with instant clarity on priorities and resource needs." },
      { name: "Improved Execution Discipline", impact: "Sustainable prioritization habits built through expert operational coaching." }
    ],
    workstreams: [
      { name: "Portfolio Management Board Design", hrs: 40 },
      { name: "Roadmapping Templates for Operations", hrs: 30 },
      { name: "Artificial Intelligence Flows for Reporting", hrs: 35 },
      { name: "Executive Visualization Dashboards", hrs: 40 },
      { name: "Change Management & Communications", hrs: 25 },
      { name: "Monthly Portfolio Operations Coaching", hrs: 70 }
    ]
  },
  {
    id: 4,
    title: "Artificial Intelligence-First",
    subtitle: "Workflow Acceleration",
    color: BRAND.yellow,
    icon: "AI",
    focus: "Safely adopting Artificial Intelligence, automating workflows, and identifying high-Return on Investment use cases.",
    bestFor: "Innovation and department leaders aiming to drive efficiency with Artificial Intelligence capabilities.",
    impactVision: "Empower teams to work 30% faster by embedding Artificial Intelligence directly into their collaborative workflows.",
    outcomes: [
      { name: "Clear AI Adoption Roadmap", impact: "Identify the top-value workflows for immediate Artificial Intelligence impact and Return on Investment." },
      { name: "Automated Synthesis & Content", impact: "Artificial Intelligence Sidekicks handle high-volume synthesis, research, and content tasks." },
      { name: "Accelerated AI-Powered Templates", impact: "Built-in Artificial Intelligence actions in core templates to speed up repetitive work." },
      { name: "Faster Execution via AI Nudges", impact: "Automated updates and alerts through Slack and Jira integration flows." },
      { name: "Confident & Safe Usage", impact: "Teams trained to use Artificial Intelligence safely and consistently within corporate standards." }
    ],
    workstreams: [
      { name: "Artificial Intelligence Readiness Assessment", hrs: 20 },
      { name: "Build Sidekick Bots for Key Workflows", hrs: 50 },
      { name: "Create Artificial Intelligence Templates", hrs: 40 },
      { name: "Integrate AI Flows With Jira & Slack", hrs: 45 },
      { name: "Artificial Intelligence Enablement Program", hrs: 35 },
      { name: "Quarterly Optimization Cycles", hrs: 50 }
    ]
  },
  {
    id: 5,
    title: "Platform Migration",
    subtitle: "+ New Ways of Working",
    color: BRAND.blue,
    icon: "Migration",
    focus: "Expert support for migrating from platforms like Mural or Lucid to Miro, combined with long-term optimization.",
    bestFor: "Information Technology and business leaders managing platform transitions and driving new standards.",
    impactVision: "Minimize transition risks while modernizing workflows to unlock superior collaboration features and lower costs.",
    outcomes: [
      { name: "Low-Risk Migration Architecture", impact: "Established workspace and governance models before migration begins to ensure security." },
      { name: "Reliable Content Migration", impact: "High-priority boards and workflows migrated with total fidelity and quality checks." },
      { name: "Modernized & Scalable Workflows", impact: "Legacy boards redesigned to leverage Miro-native collaborative features." },
      { name: "Seamless Cross-Tool Integration", impact: "Tools like Jira and Slack aligned to reduce duplicate work from day one." },
      { name: "Smooth Adoption Rollout", impact: "Champion programs and enablement ensure teams are productive on the new platform instantly." }
    ],
    workstreams: [
      { name: "Migration Assessment & Architecture", hrs: 40 },
      { name: "Migration Support for Mural & Lucid", hrs: 60 },
      { name: "Rebuild or Optimize High-Value Boards", hrs: 55 },
      { name: "Key Integrations Setup", hrs: 30 },
      { name: "Change Management & Communications", hrs: 20 },
      { name: "Adoption Monitoring & Optimization", hrs: 35 }
    ]
  },
  {
    id: 6,
    title: "Enterprise Consolidation",
    subtitle: "& Modern Collaboration",
    color: BRAND.cyan,
    icon: "Enterprise",
    focus: "Consolidating multiple Miro teams, establishing scalable integrations, and driving a structured change program.",
    bestFor: "Global Information Technology leaders managing large, complex, multi-workspace environments.",
    impactVision: "Unify the global collaborative ecosystem to eliminate shadow Information Technology and maximize tool leverage.",
    outcomes: [
      { name: "Single, Secure Miro Ecosystem", impact: "Eliminate administrative overhead and provide a consistent, structured workspace model." },
      { name: "Sustainable Admin Operating Model", impact: "Define ownership and permissions to prevent future environment sprawl." },
      { name: "Smooth Cross-Tool Enterprise Workflows", impact: "Full alignment across Microsoft and Atlassian stacks to automate manual work." },
      { name: "Reusable Standardized Library", impact: "Scale organizational best practices through custom blueprints and facilitation guides." },
      { name: "Global Executive Visibility", impact: "Insight into priorities and execution across every team without manual reporting." }
    ],
    workstreams: [
      { name: "Consolidation of Environments", hrs: 45 },
      { name: "Identity, Access, and Admin Model", hrs: 20 },
      { name: "Integrations With Microsoft and Atlassian", hrs: 45 },
      { name: "Use Case Design + Custom Templates", hrs: 80 },
      { name: "Portfolio & Cross-Team Visibility Layer", hrs: 25 },
      { name: "Enablement and Change Management", hrs: 50 }
    ]
  }
];

export default function App() {
  const [view, setView] = useState('grid');
  const [selectedPlan, setSelectedPlan] = useState(null);

  useEffect(() => {
    const handleResize = () => {
      const root = document.getElementById('scaler-root');
      if (root) {
        const scale = Math.min(window.innerWidth / 1320, 1);
        root.style.transform = `scale(${scale})`;
      }
    };
    window.addEventListener('resize', handleResize);
    setTimeout(handleResize, 50);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  const handleSelect = (plan) => {
    setSelectedPlan(plan);
    setView('detail');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  return (
    <div className="min-h-screen bg-[#F4F4F4] relative overflow-x-hidden font-['Inter'] selection:bg-[#ffdd33]">
      {/* Canvas Grid Background */}
      <div 
        className="fixed inset-0 pointer-events-none" 
        style={{ 
          backgroundImage: `radial-gradient(${BRAND.grid} 1.5px, transparent 0)`, 
          backgroundSize: '24px 24px' 
        }} 
      />

      <div id="scaler-root" className="relative z-10 p-12 max-w-[1280px] mx-auto origin-top transition-transform duration-300">
        
        {/* Header (Ref: 64pt Title Size) */}
        <header className="mb-20">
          <div className="flex items-center gap-4 mb-6">
            <span className="bg-[#1C1C1E] text-[#FFDD33] px-3 py-1 text-[11px] font-black uppercase tracking-[0.3em] rounded-md shadow-sm">
              MOST INNOVATION FRAMEWORKS
            </span>
            <div className="h-[2px] flex-1 bg-[#1C1C1E]/10"></div>
          </div>
          <h1 className="text-[64px] font-[900] italic uppercase leading-none text-[#1C1C1E] tracking-tighter">
            FROM AD-HOC WORK TO <br/>
            <span className="bg-[#FFDD33] px-4 rounded-2xl shadow-[6px_6px_0px_#1C1C1E]">STRUCTURED IMPACT</span>
          </h1>
          <p className="mt-8 text-[20px] font-bold text-[#1C1C1E]/60 max-w-3xl leading-tight italic">
            Scaling collaboration effectively requires moving beyond reactive, siloed efforts. It demands a strategic framework—a deliberate plan that aligns teams and standardizes processes.
          </p>
        </header>

        {view === 'grid' ? (
          /* GRID VIEW */
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
            {FRAMEWORKS_DATA.map((plan) => (
              <div 
                key={plan.id} 
                onClick={() => handleSelect(plan)}
                className="group bg-white border-4 border-[#1C1C1E] rounded-[2.5rem] p-10 cursor-pointer hover:shadow-[0_20px_0px_0px_#1C1C1E] transition-all hover:-translate-y-2 relative overflow-hidden flex flex-col"
              >
                <div className="flex justify-between items-start mb-8">
                  <div className="w-16 h-16 rounded-2xl flex items-center justify-center border-2 border-[#1C1C1E] shadow-[4px_4px_0px_#1C1C1E]"
                       style={{ backgroundColor: plan.color }}>
                    <div className="w-8 h-8 text-[#1C1C1E]">
                      {React.createElement(Icons[plan.icon])}
                    </div>
                  </div>
                  <span className="text-[12px] font-black text-[#1C1C1E]/30 uppercase tracking-[0.2em] italic">Blueprint 0{plan.id}</span>
                </div>
                <h3 className="text-[32px] font-[900] italic uppercase leading-[0.85] text-[#1C1C1E] tracking-tighter mb-4">
                  {plan.title}<br/>{plan.subtitle}
                </h3>
                <p className="text-[15px] font-bold text-[#1C1C1E]/60 leading-tight flex-1 mb-8">
                  {plan.focus}
                </p>
                <div className="flex items-center gap-2 text-[#1C1C1E] font-black uppercase text-[12px] tracking-widest group-hover:gap-4 transition-all">
                  VIEW STRATEGIC IMPACT
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
                </div>
              </div>
            ))}
          </div>
        ) : (
          /* DETAIL VIEW - FLYOUT FOCUS */
          <div className="animate-in fade-in slide-in-from-right-4 duration-500 space-y-12 mb-20">
            {/* Back Nav */}
            <button 
              onClick={() => setView('grid')}
              className="bg-[#1C1C1E] text-white px-8 py-4 rounded-2xl text-[12px] font-black italic uppercase tracking-widest flex items-center gap-4 shadow-[6px_6px_0px_#FFDD33] hover:opacity-90 active:translate-y-1 transition-all"
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
              BACK TO BLUEPRINTS
            </button>

            {/* Framework Header Section */}
            <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
              <div className="lg:col-span-8 p-14 rounded-[4rem] border-4 border-[#1C1C1E] bg-white shadow-[20px_20px_0px_0px_#1C1C1E] relative overflow-hidden">
                <div className="absolute top-0 right-0 p-12 text-[180px] font-[900] italic opacity-[0.03] select-none pointer-events-none leading-none">
                  0{selectedPlan.id}
                </div>
                <div className="relative z-10">
                  <div className="w-24 h-24 rounded-3xl flex items-center justify-center border-4 border-[#1C1C1E] shadow-[8px_8px_0px_#1C1C1E] mb-10"
                       style={{ backgroundColor: selectedPlan.color }}>
                    <div className="w-12 h-12 text-[#1C1C1E]">
                      {React.createElement(Icons[selectedPlan.icon])}
                    </div>
                  </div>
                  <h2 className="text-[64px] font-[900] italic uppercase leading-[0.8] tracking-tighter mb-8">
                    {selectedPlan.title}<br/>
                    <span className="text-[#1C1C1E]/40 italic">{selectedPlan.subtitle}</span>
                  </h2>
                  
                  {/* IMPACT FOCUS PILLAR */}
                  <div className="bg-[#1C1C1E] text-white p-10 rounded-3xl mb-12 shadow-[12px_12px_0px_0px_#FFDD33]">
                    <span className="text-[#FFDD33] font-black uppercase text-[10px] tracking-[0.4em] mb-4 block">EXECUTIVE BUSINESS IMPACT</span>
                    <p className="text-[28px] font-[900] italic uppercase leading-tight tracking-tight">
                      "{selectedPlan.impactVision}"
                    </p>
                  </div>

                  <div className="space-y-4">
                    <span className="text-[12px] font-black uppercase text-[#1C1C1E]/40 tracking-[0.3em] block">Target Organizational Leaders</span>
                    <p className="text-[18px] font-bold text-[#1C1C1E]/80 leading-snug">{selectedPlan.bestFor}</p>
                  </div>
                </div>
              </div>

              {/* Roadmap Summary Column */}
              <div className="lg:col-span-4 bg-[#1C1C1E] text-white p-12 rounded-[4rem] border-4 border-[#1C1C1E] flex flex-col shadow-[20px_20px_0px_0px_#FFDD3320]">
                <h3 className="text-[12px] font-black uppercase text-white/40 tracking-[0.4em] mb-12 italic underline underline-offset-8 decoration-white/20">Workstream Strategy</h3>
                <div className="space-y-6 flex-1">
                  {selectedPlan.workstreams.map((ws, i) => (
                    <div key={i} className="flex justify-between items-start gap-4 border-b border-white/10 pb-4 last:border-0">
                      <span className="text-[14px] font-black uppercase tracking-tight leading-tight">{ws.name}</span>
                      <span className="text-[11px] font-black text-[#FFDD33] bg-[#FFDD33]/15 px-3 py-1 rounded-lg border border-[#FFDD33]/30 whitespace-nowrap">~{ws.hrs}h</span>
                    </div>
                  ))}
                </div>
                <div className="mt-12 pt-8 border-t-2 border-white/10">
                  <div className="flex items-end gap-3">
                    <span className="text-[84px] font-[900] italic leading-[0.7] text-[#FFDD33] tracking-tighter">240</span>
                    <span className="text-[20px] font-black italic mb-2 uppercase opacity-60">Total Hours</span>
                  </div>
                  <p className="text-[11px] font-bold opacity-30 mt-4 leading-tight italic">Allocations shown are illustrative models based on standard enterprise scale.</p>
                </div>
              </div>
            </div>

            {/* Strategic Outcomes Section (The "Impact Cards") */}
            <div className="flex flex-col gap-8">
              <div className="flex items-center gap-6">
                <h3 className="text-[32px] font-[900] italic uppercase text-[#1C1C1E] tracking-tighter">Measurable Expected Outcomes</h3>
                <div className="h-[2px] flex-1 bg-[#1C1C1E]/10"></div>
              </div>
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                {selectedPlan.outcomes.map((outcome, i) => (
                  <div key={i} className="bg-white border-4 border-[#1C1C1E] p-10 rounded-[3rem] shadow-[12px_12px_0px_0px_#47D1C4] flex gap-8 items-start hover:shadow-[12px_12px_0px_0px_#1C1C1E] transition-all group">
                    <div className="w-16 h-16 rounded-[1.25rem] bg-[#FFDD33] border-4 border-[#1C1C1E] flex items-center justify-center shrink-0 mt-1 shadow-[4px_4px_0px_#1C1C1E] group-hover:scale-110 transition-transform">
                      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="5" className="text-[#1C1C1E]"><polyline points="20 6 9 17 4 12"/></svg>
                    </div>
                    <div>
                      <h4 className="text-[24px] font-[900] italic uppercase leading-tight mb-3 tracking-tight text-[#1C1C1E]">
                        {outcome.name}
                      </h4>
                      <p className="text-[18px] font-bold text-[#1C1C1E]/60 leading-snug italic">
                        {outcome.impact}
                      </p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Footer Accent */}
        <footer className="mt-40 pt-12 border-t-4 border-[#1C1C1E]/10 flex flex-col md:flex-row justify-between items-center gap-8 opacity-40">
          <div className="text-[#1C1C1E] font-black italic uppercase text-[12px] tracking-[0.3em]">Miro Professional Services • Frameworks for Innovation Excellence</div>
          <div className="flex gap-10">
            <div className="flex flex-col">
              <span className="text-[9px] font-black uppercase tracking-widest text-[#1C1C1E]/40 mb-1">Status</span>
              <span className="text-[14px] font-black italic">PROVEN BLUEPRINTS</span>
            </div>
            <div className="flex flex-col">
              <span className="text-[9px] font-black uppercase tracking-widest text-[#1C1C1E]/40 mb-1">Focus</span>
              <span className="text-[14px] font-black italic">OUTCOME-DRIVEN</span>
            </div>
          </div>
        </footer>

        {/* Persistent Branding Anchor */}
        <div className="fixed -bottom-24 -right-24 text-[320px] font-[900] italic uppercase text-[#1C1C1E]/[0.02] tracking-tighter pointer-events-none leading-none select-none">
          MIRO
        </div>
      </div>

      <style dangerouslySetInnerHTML={{ __html: `
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&display=swap');
        
        .animate-in {
          animation: enter 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes enter {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Hide scrollbar for standard Miro board aesthetic */
        ::-webkit-scrollbar { display: none; }
        * { scrollbar-width: none; -ms-overflow-style: none; }
      `}} />
    </div>
  );
}
